/*! wavedrom 2015-03-13 */
var JsonML;void 0===JsonML&&(JsonML={}),function(){"use strict";function a(a,b,c){"string"==typeof c&&(c=new Function("event",c)),"function"==typeof c&&(a[b]=c)}function b(b,c){if(c.name&&document.attachEvent)try{var d=document.createElement("<"+b.tagName+" name='"+c.name+"'>");b.tagName===d.tagName&&(b=d)}catch(e){}for(var f in c)if(c.hasOwnProperty(f)){var g=c[f];f&&null!==g&&"undefined"!=typeof g&&(f=j[f.toLowerCase()]||f,"style"===f?"undefined"!=typeof b.style.cssText?b.style.cssText=g:b.style=g:l[f]?(a(b,f,g),k[f]&&a(b,k[f],g)):"string"==typeof g||"number"==typeof g||"boolean"==typeof g?(b.setAttribute(f,g),k[f]&&b.setAttribute(k[f],g)):(b[f]=g,k[f]&&(b[k[f]]=g)))}return b}function c(a,b){if(b)if(a.tagName&&"table"===a.tagName.toLowerCase()&&a.tBodies){if(!b.tagName){if(11===b.nodeType)for(;b.firstChild;)c(a,b.removeChild(b.firstChild));return}var d=b.tagName.toLowerCase();if(d&&"tbody"!==d&&"thead"!==d){var e=a.tBodies.length>0?a.tBodies[a.tBodies.length-1]:null;e||(e=document.createElement("th"===d?"thead":"tbody"),a.appendChild(e)),e.appendChild(b)}else a.canHaveChildren!==!1&&a.appendChild(b)}else if(a.tagName&&"style"===a.tagName.toLowerCase()&&document.createStyleSheet)a.cssText=b;else if(a.canHaveChildren!==!1)a.appendChild(b);else if(a.tagName&&"object"===a.tagName.toLowerCase()&&b.tagName&&"param"===b.tagName.toLowerCase()){try{a.appendChild(b)}catch(f){}try{a.object&&(a.object[b.name]=b.value)}catch(g){}}}function d(a){return a&&3===a.nodeType&&(!a.nodeValue||!/\S/.exec(a.nodeValue))}function e(a){if(a){for(;d(a.firstChild);)a.removeChild(a.firstChild);for(;d(a.lastChild);)a.removeChild(a.lastChild)}}function f(a){var b=document.createElement("div");if(b.innerHTML=a,e(b),1===b.childNodes.length)return b.firstChild;for(var c=document.createDocumentFragment?document.createDocumentFragment():document.createElement("");b.firstChild;)c.appendChild(b.firstChild);return c}function g(a){this.value=a}function h(a){return document.createTextNode("["+a+"]")}function i(a,d,e){for(var h=1;h<d.length;h++)d[h]instanceof Array||"string"==typeof d[h]?c(a,JsonML.parse(d[h],e)):d[h]instanceof g?c(a,f(d[h].value)):"object"==typeof d[h]&&null!==d[h]&&1===a.nodeType&&(a=b(a,d[h]));return a}var j={rowspan:"rowSpan",colspan:"colSpan",cellpadding:"cellPadding",cellspacing:"cellSpacing",tabindex:"tabIndex",accesskey:"accessKey",hidefocus:"hideFocus",usemap:"useMap",maxlength:"maxLength",readonly:"readOnly",contenteditable:"contentEditable"},k={enctype:"encoding",onscroll:"DOMMouseScroll"},l=function(a){for(var b,c={};a.length;)b=a.shift(),c["on"+b.toLowerCase()]=b;return c}("blur,change,click,dblclick,error,focus,keydown,keypress,keyup,load,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,resize,scroll,select,submit,unload".split(","));JsonML.onerror=null,JsonML.parse=function(a,b){try{if(!a)return null;if("string"==typeof a)return document.createTextNode(a);if(a instanceof g)return f(a.value);if(!JsonML.isElement(a))throw new SyntaxError("invalid JsonML");var d=a[0];if(!d){for(var j=document.createDocumentFragment?document.createDocumentFragment():document.createElement(""),k=1;k<a.length;k++)c(j,JsonML.parse(a[k],b));return e(j),1===j.childNodes.length?j.firstChild:j}if("style"===d.toLowerCase()&&document.createStyleSheet)return JsonML.patch(document.createStyleSheet(),a,b),null;var l,m="http://www.w3.org/2000/svg";return l=i(document.createElementNS(m,d),a,b),e(l),l&&"function"==typeof b?b(l):l}catch(n){try{var o="function"==typeof JsonML.onerror?JsonML.onerror:h;return o(n,a,b)}catch(p){return document.createTextNode("["+p+"]")}}},JsonML.isElement=function(a){return a instanceof Array&&"string"==typeof a[0]}}();var WaveDrom=WaveDrom||{};!function(){"use strict";function genBrick(a,b,c){var d,e,f=[];if(4===a.length){for(e=0;c>e;e+=1){for(f.push(a[0]),d=0;b>d;d+=1)f.push(a[1]);for(f.push(a[2]),d=0;b>d;d+=1)f.push(a[3])}return f}for(1===a.length&&a.push(a[0]),f.push(a[0]),d=0;2*c*(b+1)-1>d;d+=1)f.push(a[1]);return f}function genFirstWaveBrick(a,b,c){var d;switch(d=[],a){case"p":d=genBrick(["pclk","111","nclk","000"],b,c);break;case"n":d=genBrick(["nclk","000","pclk","111"],b,c);break;case"P":d=genBrick(["Pclk","111","nclk","000"],b,c);break;case"N":d=genBrick(["Nclk","000","pclk","111"],b,c);break;case"l":case"L":case"0":d=genBrick(["000"],b,c);break;case"h":case"H":case"1":d=genBrick(["111"],b,c);break;case"=":d=genBrick(["vvv-2"],b,c);break;case"2":d=genBrick(["vvv-2"],b,c);break;case"3":d=genBrick(["vvv-3"],b,c);break;case"4":d=genBrick(["vvv-4"],b,c);break;case"5":d=genBrick(["vvv-5"],b,c);break;case"d":d=genBrick(["ddd"],b,c);break;case"u":d=genBrick(["uuu"],b,c);break;case"z":d=genBrick(["zzz"],b,c);break;default:d=genBrick(["xxx"],b,c)}return d}function genWaveBrick(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;return d={p:"pclk",n:"nclk",P:"Pclk",N:"Nclk",h:"pclk",l:"nclk",H:"Pclk",L:"Nclk"},e={0:"0",1:"1",x:"x",d:"d",u:"u",z:"z","=":"v",2:"v",3:"v",4:"v",5:"v"},f={0:"",1:"",x:"",d:"",u:"",z:"","=":"-2",2:"-2",3:"-3",4:"-4",5:"-5"},g={p:"0",n:"1",P:"0",N:"1",h:"1",l:"0",H:"1",L:"0",0:"0",1:"1",x:"x",d:"d",u:"u",z:"z","=":"v",2:"v",3:"v",4:"v",5:"v"},h={p:"",n:"",P:"",N:"",h:"",l:"",H:"",L:"",0:"",1:"",x:"",d:"",u:"",z:"","=":"-2",2:"-2",3:"-3",4:"-4",5:"-5"},i={p:"111",n:"000",P:"111",N:"000",h:"111",l:"000",H:"111",L:"000",0:"000",1:"111",x:"xxx",d:"ddd",u:"uuu",z:"zzz","=":"vvv-2",2:"vvv-2",3:"vvv-3",4:"vvv-4",5:"vvv-5"},j={p:"nclk",n:"pclk",P:"nclk",N:"pclk"},k={p:"000",n:"111",P:"000",N:"111"},l={hp:"111",Hp:"111",ln:"000",Ln:"000",nh:"111",Nh:"111",pl:"000",Pl:"000"},m=a.split(""),n=i[m[1]],o=d[m[1]],void 0===o?(p=e[m[1]],void 0===p?genBrick(["xxx"],b,c):(q=g[m[0]],void 0===q?genBrick(["xxx"],b,c):genBrick([q+"m"+p+h[m[0]]+f[m[1]],n],b,c))):(r=l[a],void 0!==r&&(o=r),p=j[m[1]],void 0===p?genBrick([o,n],b,c):genBrick([o,n,p,k[m[1]]],b,c))}function parseWaveLane(a,b){var c,d,e,f,g=[],h=[];for(g=a.split(""),e=g.shift(),c=1;"."===g[0]||"|"===g[0];)g.shift(),c+=1;for(h=h.concat(genFirstWaveBrick(e,b,c));g.length;){for(d=e,e=g.shift(),c=1;"."===g[0]||"|"===g[0];)g.shift(),c+=1;h=h.concat(genWaveBrick(d+e,b,c))}for(f=0;f<lane.phase;f+=1)h.shift();return h}function parseWaveLanes(a){function b(a){var b=a.data;return void 0===b?null:"string"==typeof b?b.split(" "):b}var c,d,e=[],f=[];for(c in a)d=a[c],lane.period=d.period?d.period:1,lane.phase=d.phase?2*d.phase:0,e.push([]),f[0]=d.name||" ",f[1]=d.phase||0,e[e.length-1][0]=f.slice(0),e[e.length-1][1]=d.wave?parseWaveLane(d.wave,lane.period*lane.hscale-1,lane):null,e[e.length-1][2]=b(d);return e}function findLaneMarkers(a){var b,c=0,d=0,e=[];for(b in a)"vvv-2"===a[b]|"vvv-3"===a[b]|"vvv-4"===a[b]|"vvv-5"===a[b]?d+=1:0!==d&&(e.push(c-(d+1)/2),d=0),c+=1;return 0!==d&&e.push(c-(d+1)/2),e}function renderWaveLane(a,b,c){var d,e,f,g,h,i,j,k,l=[1],m=0,n=0,o=[],p="http://www.w3.org/2000/svg",q="http://www.w3.org/1999/xlink",r="http://www.w3.org/XML/1998/namespace";for(e=0;e<b.length;e+=1)if(k=b[e][0][0]){g=parse(["g",{id:"wavelane_"+e+"_"+c,transform:"translate(0,"+(lane.y0+e*lane.yo)+")"}]),a.insertBefore(g,null),"number"==typeof k&&(k+=""),i=parse(["text",{x:lane.tgo,y:lane.ym,"class":"info","text-anchor":"end"},k]),i.setAttributeNS(r,"xml:space","preserve"),g.insertBefore(i,null),o.push(i.getBBox().width);var s;if(s=b[e][0][1],s=s>0?Math.ceil(2*s)-2*s:-2*s,h=parse(["g",{id:"wavelane_draw_"+e+"_"+c,transform:"translate("+s*lane.xs+", 0)"}]),g.insertBefore(h,null),b[e][1]){for(d=0;d<b[e][1].length;d+=1)j=document.createElementNS(p,"use"),j.setAttributeNS(q,"xlink:href","#"+b[e][1][d]),j.setAttribute("transform","translate("+d*lane.xs+")"),h.insertBefore(j,null);if(b[e][2]&&b[e][2].length&&(l=findLaneMarkers(b[e][1]),0!==l.length))for(f in l)b[e][2]&&"undefined"!=typeof b[e][2][f]&&(i=parse(["text",{x:l[f]*lane.xs+lane.xlabel,y:lane.ym,"text-anchor":"middle"},b[e][2][f]]),i.setAttributeNS(r,"xml:space","preserve"),h.insertBefore(i,null));b[e][1].length>m&&(m=b[e][1].length)}}return lane.xmax=m,lane.xg=n+20,o}function renderMarks(a,b,c){function d(a,b,c){var d;a[b]&&a[b].text&&(d=parse(["text",{x:a.xmax*a.xs/2,y:c,"text-anchor":"middle",fill:"#000"},a[b].text]),d.setAttributeNS(l,"xml:space","preserve"),g.insertBefore(d,null))}function e(a,b,c,d,e,h,i){var j,k,m,n,o=1,p=0,q=[];if(void 0!==a[b]&&void 0!==a[b][c]){if(m=a[b][c],"string"==typeof m)m=m.split(" ");else if("number"==typeof m||"boolean"==typeof m)for(k=Number(m),m=[],f=0;i>f;f+=1)m.push(f+k);if("[object Array]"===Object.prototype.toString.call(m)&&0!==m.length){if(1===m.length)if(k=Number(m[0]),isNaN(k))q=m;else for(f=0;i>f;f+=1)q[f]=f+k;else if(2===m.length)if(k=Number(m[0]),o=Number(m[1]),n=m[1].split("."),2===n.length&&(p=n[1].length),isNaN(k)||isNaN(o))q=m;else for(k=o*k,f=0;i>f;f+=1)q[f]=(o*f+k).toFixed(p);else q=m;for(f=0;i>f;f+=1)n=q[f],"number"==typeof n&&(n+=""),j=parse(["text",{x:f*e+d,y:h,"text-anchor":"middle","class":"muted"},n]),j.setAttributeNS(l,"xml:space","preserve"),g.insertBefore(j,null)}}}var f,g,h,i,j,k,l;for(l="http://www.w3.org/XML/1998/namespace",i=2*lane.hscale,j=i*lane.xs,h=lane.xmax/i,k=b.length*lane.yo,g=parse(["g",{id:"gmarks_"+c}]),a.insertBefore(g,a.firstChild),f=0;h+1>f;f+=1)g.insertBefore(parse(["path",{id:"gmark_"+f+"_"+c,d:"m "+f*j+",0 0,"+k,style:"stroke:#888;stroke-width:0.5;stroke-dasharray:1,3"}]),null);d(lane,"head",lane.yh0?-33:-13),d(lane,"foot",k+(lane.yf0?45:25)),e(lane,"head","tick",0,j,-5,h+1),e(lane,"head","tock",j/2,j,-5,h),e(lane,"foot","tick",0,j,k+15,h+1),e(lane,"foot","tock",j/2,j,k+15,h)}function renderGroups(a,b,c){var d,e,f,g,h,i,j="http://www.w3.org/2000/svg",k="http://www.w3.org/XML/1998/namespace";for(d in b)e=document.createElementNS(j,"path"),e.id="group_"+d+"_"+c,e.setAttribute("d","m "+(b[d].x+.5)+","+(b[d].y*lane.yo+3.5+lane.yh0+lane.yh1)+" c -3,0 -5,2 -5,5 l 0,"+(b[d].height*lane.yo-16)+" c 0,3 2,5 5,5"),e.setAttribute("style","stroke:#0041c4;stroke-width:1;fill:none"),a.insertBefore(e,null),i=b[d].name,"undefined"!=typeof i&&("number"==typeof i&&(i+=""),g=b[d].x-10,h=lane.yo*(b[d].y+b[d].height/2)+lane.yh0+lane.yh1,f=parse(["text",{x:g,y:h,"text-anchor":"middle","class":"info",transform:"rotate(270,"+g+","+h+")"},i]),f.setAttributeNS(k,"xml:space","preserve"),a.insertBefore(f,null))}function renderGaps(a,b,c){var d,e,f,g,h,i,j=[],k="http://www.w3.org/2000/svg",l="http://www.w3.org/1999/xlink";if(b){e=document.createElementNS(k,"g"),e.id="wavegaps_"+c,a.insertBefore(e,null);for(d in b)if(lane.period=b[d].period?b[d].period:1,lane.phase=b[d].phase?2*b[d].phase:0,f=document.createElementNS(k,"g"),f.id="wavegap_"+d+"_"+c,f.setAttribute("transform","translate(0,"+(lane.y0+d*lane.yo)+")"),e.insertBefore(f,null),i=b[d].wave)for(j=i.split(""),h=0;j.length;)"|"===j.shift()&&(g=document.createElementNS(k,"use"),g.setAttributeNS(l,"xlink:href","#gap"),g.setAttribute("transform","translate("+lane.xs*((2*h+1)*lane.period*lane.hscale-lane.phase)+")"),f.insertBefore(g,null)),h+=1}}function renderArcs(a,b,c,d){function e(){p=document.createElementNS(u,"path"),p.id="gmark_"+s.from+"_"+s.to,p.setAttribute("d","M "+n.x+","+n.y+" "+o.x+","+o.y),p.setAttribute("style","fill:none;stroke:#00F;stroke-width:1"),f.insertBefore(p,null)}var f,g,h,i,j,k,l,m,n,o,p,q,r=[],s={words:[],from:0,shape:"",to:0,label:""},t={},u="http://www.w3.org/2000/svg",v="http://www.w3.org/XML/1998/namespace";if(b){for(g in b)if(lane.period=b[g].period?b[g].period:1,lane.phase=b[g].phase?2*b[g].phase:0,i=b[g].node)for(r=i.split(""),j=0;r.length;)k=r.shift(),"."!==k&&(t[k]={x:lane.xs*(2*j*lane.period*lane.hscale-lane.phase)+lane.xlabel,y:g*lane.yo+lane.y0+.5*lane.ys}),j+=1;if(f=document.createElementNS(u,"g"),f.id="wavearcs_"+c,a.insertBefore(f,null),d.edge)for(g in d.edge){s.words=d.edge[g].split(" "),s.label=d.edge[g].substring(s.words[0].length),s.label=s.label.substring(1),s.from=s.words[0].substr(0,1),s.to=s.words[0].substr(-1,1),s.shape=s.words[0].slice(1,-1),n=t[s.from],o=t[s.to],e(),s.label&&(l=parse(["text",{style:"font-size:10px;","text-anchor":"middle"},s.label+""]),l.setAttributeNS(v,"xml:space","preserve"),m=parse(["rect",{height:9,style:"fill:#FFF;"}]),f.insertBefore(m,null),f.insertBefore(l,null),q=l.getBBox().width,m.setAttribute("width",q));var w=o.x-n.x,x=o.y-n.y,y=(n.x+o.x)/2,z=(n.y+o.y)/2;switch(s.shape){case"-":break;case"~":p.setAttribute("d","M "+n.x+","+n.y+" c "+.7*w+", 0 "+.3*w+", "+x+" "+w+", "+x);break;case"-~":p.setAttribute("d","M "+n.x+","+n.y+" c "+.7*w+", 0 "+w+", "+x+" "+w+", "+x),s.label&&(y=n.x+.75*(o.x-n.x));break;case"~-":p.setAttribute("d","M "+n.x+","+n.y+" c 0, 0 "+.3*w+", "+x+" "+w+", "+x),s.label&&(y=n.x+.25*(o.x-n.x));break;case"-|":p.setAttribute("d","m "+n.x+","+n.y+" "+w+",0 0,"+x),s.label&&(y=o.x);break;case"|-":p.setAttribute("d","m "+n.x+","+n.y+" 0,"+x+" "+w+",0"),s.label&&(y=n.x);break;case"-|-":p.setAttribute("d","m "+n.x+","+n.y+" "+w/2+",0 0,"+x+" "+w/2+",0");break;case"->":p.setAttribute("style","marker-end:url(#arrowhead);stroke:#0041c4;stroke-width:1;fill:none");break;case"~>":p.setAttribute("style","marker-end:url(#arrowhead);stroke:#0041c4;stroke-width:1;fill:none"),p.setAttribute("d","M "+n.x+","+n.y+" c "+.7*w+", 0 "+.3*w+", "+x+" "+w+", "+x);break;case"-~>":p.setAttribute("style","marker-end:url(#arrowhead);stroke:#0041c4;stroke-width:1;fill:none"),p.setAttribute("d","M "+n.x+","+n.y+" c "+.7*w+", 0 "+w+", "+x+" "+w+", "+x),s.label&&(y=n.x+.75*(o.x-n.x));break;case"~->":p.setAttribute("style","marker-end:url(#arrowhead);stroke:#0041c4;stroke-width:1;fill:none"),p.setAttribute("d","M "+n.x+","+n.y+" c 0, 0 "+.3*w+", "+x+" "+w+", "+x),s.label&&(y=n.x+.25*(o.x-n.x));break;case"-|>":p.setAttribute("style","marker-end:url(#arrowhead);stroke:#0041c4;stroke-width:1;fill:none"),p.setAttribute("d","m "+n.x+","+n.y+" "+w+",0 0,"+x),s.label&&(y=o.x);break;case"|->":p.setAttribute("style","marker-end:url(#arrowhead);stroke:#0041c4;stroke-width:1;fill:none"),p.setAttribute("d","m "+n.x+","+n.y+" 0,"+x+" "+w+",0"),s.label&&(y=n.x);break;case"-|->":p.setAttribute("style","marker-end:url(#arrowhead);stroke:#0041c4;stroke-width:1;fill:none"),p.setAttribute("d","m "+n.x+","+n.y+" "+w/2+",0 0,"+x+" "+w/2+",0");break;case"<->":p.setAttribute("style","marker-end:url(#arrowhead);marker-start:url(#arrowtail);stroke:#0041c4;stroke-width:1;fill:none");break;case"<~>":p.setAttribute("style","marker-end:url(#arrowhead);marker-start:url(#arrowtail);stroke:#0041c4;stroke-width:1;fill:none"),p.setAttribute("d","M "+n.x+","+n.y+" c "+.7*w+", 0 "+.3*w+", "+x+" "+w+", "+x);break;case"<-~>":p.setAttribute("style","marker-end:url(#arrowhead);marker-start:url(#arrowtail);stroke:#0041c4;stroke-width:1;fill:none"),p.setAttribute("d","M "+n.x+","+n.y+" c "+.7*w+", 0 "+w+", "+x+" "+w+", "+x),s.label&&(y=n.x+.75*(o.x-n.x));break;case"<-|>":p.setAttribute("style","marker-end:url(#arrowhead);marker-start:url(#arrowtail);stroke:#0041c4;stroke-width:1;fill:none"),p.setAttribute("d","m "+n.x+","+n.y+" "+w+",0 0,"+x),s.label&&(y=o.x);break;case"<-|->":p.setAttribute("style","marker-end:url(#arrowhead);marker-start:url(#arrowtail);stroke:#0041c4;stroke-width:1;fill:none"),p.setAttribute("d","m "+n.x+","+n.y+" "+w/2+",0 0,"+x+" "+w/2+",0");break;default:p.setAttribute("style","fill:none;stroke:#F00;stroke-width:1")}s.label&&(l.setAttribute("x",y),l.setAttribute("y",z+3),m.setAttribute("x",y-q/2),m.setAttribute("y",z-5))}for(h in t)h===h.toLowerCase()&&t[h].x>0&&(m=parse(["rect",{y:t[h].y-4,height:8,style:"fill:#FFF;"}]),f.insertBefore(m,null),l=parse(["text",{style:"font-size:8px;",x:t[h].x,y:t[h].y+2,"text-anchor":"middle"},h+""]),f.insertBefore(l,null),q=l.getBBox().width+2,m.setAttribute("x",t[h].x-q/2),m.setAttribute("width",q))}}function parseConfig(a){function b(a){return a>0?Math.round(a):1}var c;lane.hscale=1,lane.hscale0&&(lane.hscale=lane.hscale0),a&&a.config&&a.config.hscale&&(c=Math.round(b(a.config.hscale)),c>0&&(c>100&&(c=100),lane.hscale=c)),lane.yh0=0,lane.yh1=0,lane.head=a.head,a&&a.head&&((a.head.tick||0===a.head.tick)&&(lane.yh0=20),(a.head.tock||0===a.head.tock)&&(lane.yh0=20),a.head.text&&(lane.yh1=46,lane.head.text=a.head.text)),lane.yf0=0,lane.yf1=0,lane.foot=a.foot,a&&a.foot&&((a.foot.tick||0===a.foot.tick)&&(lane.yf0=20),(a.foot.tock||0===a.foot.tock)&&(lane.yf0=20),a.foot.text&&(lane.yf1=46,lane.foot.text=a.foot.text))}function rec(a,b){var c,d,e={},f={x:10};for(("string"==typeof a[0]||"number"==typeof a[0])&&(d=a[0],f.x=25),b.x+=f.x,c=0;c<a.length;c++)"object"==typeof a[c]&&("[object Array]"===Object.prototype.toString.call(a[c])?(e.y=b.y,b=rec(a[c],b),b.groups.push({x:b.xx,y:e.y,height:b.y-e.y,name:b.name})):(b.lanes.push(a[c]),b.width.push(b.x),b.y+=1));return b.xx=b.x,b.x-=f.x,b.name=d,b}function insertSVGTemplate(a,b,c){for(var d,e,f;b.childNodes.length;)b.removeChild(b.childNodes[0]);for(e in waveSkin)break;f=waveSkin["default"]||waveSkin[e],c&&c.config&&c.config.skin&&waveSkin[c.config.skin]&&(f=waveSkin[c.config.skin]),0===a?(lane.xs=Number(f[3][1][2][1].width),lane.ys=Number(f[3][1][2][1].height),lane.xlabel=Number(f[3][1][2][1].x),lane.ym=Number(f[3][1][2][1].y)):f=["svg",{id:"svg",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",height:"0"},["g",{id:"waves"},["g",{id:"lanes"}],["g",{id:"groups"}]]],f[f.length-1][1].id="waves_"+a,f[f.length-1][2][1].id="lanes_"+a,f[f.length-1][3][1].id="groups_"+a,f[1].id="svgcontent_"+a,f[1].height=0,d=parse(f),b.insertBefore(d,null)}function insertSVGTemplateAssign(a,b){for(var c,d;b.childNodes.length;)b.removeChild(b.childNodes[0]);d=["svg",{id:"svgcontent_"+a,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",overflow:"hidden"},["style",".pinname {font-size:12px; font-style:normal; font-variant:normal; font-weight:500; font-stretch:normal; text-align:center; text-anchor:end; font-family:Helvetica} .wirename {font-size:12px; font-style:normal; font-variant:normal; font-weight:500; font-stretch:normal; text-align:center; text-anchor:start; font-family:Helvetica} .wirename:hover {fill:blue} .gate {color:#000; fill:#ffc; fill-opacity: 1;stroke:#000; stroke-width:1; stroke-opacity:1} .gate:hover {fill:red !important; } .wire {fill:none; stroke:#000; stroke-width:1; stroke-opacity:1} .grid {fill:#fff; fill-opacity:1; stroke:none}"]],c=parse(d),b.insertBefore(c,null)}function renderAssign(a,b){function c(a,b){var d,e,f;for(b.xmax=Math.max(b.xmax,b.x),d=b.y,f=a.length,e=1;f>e;e++)"[object Array]"===Object.prototype.toString.call(a[e])?b=c(a[e],{x:b.x+1,y:b.y,xmax:b.xmax}):(a[e]={name:a[e],x:b.x+1,y:b.y},b.y+=2);return a[0]={name:a[0],x:b.x,y:Math.round((d+(b.y-2))/2)},b.x--,b}function d(a,b,c){console.log(b,c);var d,e,f=" M 4,0 C 4,1.1 3.1,2 2,2 0.9,2 0,1.1 0,0 c 0,-1.1 0.9,-2 2,-2 1.1,0 2,0.9 2,2 z",g={"~":"M -11,-6 -11,6 0,0 z m -5,6 5,0"+f,"=":"M -11,-6 -11,6 0,0 z m -5,6 5,0","&":"m -16,-10 5,0 c 6,0 11,4 11,10 0,6 -5,10 -11,10 l -5,0 z","~&":"m -16,-10 5,0 c 6,0 11,4 11,10 0,6 -5,10 -11,10 l -5,0 z"+f,"|":"m -18,-10 4,0 c 6,0 12,5 14,10 -2,5 -8,10 -14,10 l -4,0 c 2.5,-5 2.5,-15 0,-20 z","~|":"m -18,-10 4,0 c 6,0 12,5 14,10 -2,5 -8,10 -14,10 l -4,0 c 2.5,-5 2.5,-15 0,-20 z"+f,"^":"m -21,-10 c 1,3 2,6 2,10 m 0,0 c 0,4 -1,7 -2,10 m 3,-20 4,0 c 6,0 12,5 14,10 -2,5 -8,10 -14,10 l -4,0 c 1,-3 2,-6 2,-10 0,-4 -1,-7 -2,-10 z","~^":"m -21,-10 c 1,3 2,6 2,10 m 0,0 c 0,4 -1,7 -2,10 m 3,-20 4,0 c 6,0 12,5 14,10 -2,5 -8,10 -14,10 l -4,0 c 1,-3 2,-6 2,-10 0,-4 -1,-7 -2,-10 z"+f,"+":"m -8,5 0,-10 m -5,5 10,0 m 3,0 c 0,4.418278 -3.581722,8 -8,8 -4.418278,0 -8,-3.581722 -8,-8 0,-4.418278 3.581722,-8 8,-8 4.418278,0 8,3.581722 8,8 z","*":"m -4,4 -8,-8 m 0,8 8,-8 m 4,4 c 0,4.418278 -3.581722,8 -8,8 -4.418278,0 -8,-3.581722 -8,-8 0,-4.418278 3.581722,-8 8,-8 4.418278,0 8,3.581722 8,8 z"},h={BUF:1,INV:1,AND:"&",NAND:"&",OR:"≥1",NOR:"≥1",XOR:"=1",XNOR:"=1",box:""},i={INV:1,NAND:1,NOR:1,XNOR:1};return c===b&&(c=4,b=-4),d=g[a],e=h[a],d?["path",{"class":"gate",d:d}]:e?["g",["path",{"class":"gate",d:"m -16,"+(b-3)+" 16,0 0,"+(c-b+6)+" -16,0 z"+(i[a]?f:"")}],["text",["tspan",{x:"-14",y:"4","class":"wirename"},e+""]]]:["text",["tspan",{x:"-14",y:"4","class":"wirename"},a+""]]}function e(a){var b,c,e,f=["g"],g=[],h=a.length;for(b=2;h>b;b++)g.push(a[b][1]);for(c=Math.min.apply(null,g),e=Math.max.apply(null,g),f.push(["g",{transform:"translate(16,0)"},["path",{d:"M  "+a[2][0]+","+c+" "+a[2][0]+","+e,"class":"wire"}]]),b=2;h>b;b++)f.push(["g",["path",{d:"m  "+a[b][0]+","+a[b][1]+" 16,0","class":"wire"}]]);return f.push(["g",{transform:"translate("+a[1][0]+","+a[1][1]+")"},["title",a[0]],d(a[0],c-a[1][1],e-a[1][1])]),f}function f(a,b){var c,d,g,h,i,j=["g"],k=[];if("[object Array]"===Object.prototype.toString.call(a)){for(d=a.length,k.push(a[0].name),k.push([32*(b-a[0].x),8*a[0].y]),c=1;d>c;c++)k.push("[object Array]"===Object.prototype.toString.call(a[c])?[32*(b-a[c][0].x),8*a[c][0].y]:[32*(b-a[c].x),8*a[c].y]);for(j.push(e(k)),c=1;d>c;c++)j.push(f(a[c],b))}else i=a.name,g=32*(b-a.x),h=8*a.y,j.push(["g",{transform:"translate("+g+","+h+")"},["title",i],["path",{d:"M 2,0 a 2,2 0 1 1 -4,0 2,2 0 1 1 4,0 z"}],["text",["tspan",{x:"-4",y:"4","class":"pinname"},i]]]);return j}var g,h,i,j,k,l,m,n,o,p,q=["g"],r=["g"];for(n=b.assign.length,h={x:0,y:2,xmax:0},g=b.assign,m=0;n>m;m++)h=c(g[m],h),h.x++;for(i=h.xmax+3,m=0;n>m;m++)q.push(f(g[m],i));for(k=32*(i+1)+1,l=8*(h.y+1)-7,n=4*(i+1),p=h.y+1,m=0;n>=m;m++)for(o=0;p>=o;o++)r.push(["rect",{height:1,width:1,x:8*m-.5,y:8*o-.5,"class":"grid"}]);j=document.getElementById("svgcontent_"+a),j.setAttribute("viewBox","0 0 "+k+" "+l),j.setAttribute("width",k),j.setAttribute("height",l),j.insertBefore(JsonML.parse(["g",{transform:"translate(0.5, 0.5)"},r,q]),null)}function eva(id){function erra(a){return console.log(a.stack),{signal:[{name:["tspan",["tspan",{"class":"error h5"},"Error: "],a.message]}]}}var TheTextBox,source;if(TheTextBox=document.getElementById(id),TheTextBox.type&&"textarea"===TheTextBox.type)try{source=eval("("+TheTextBox.value+")")}catch(e){return erra(e)}else try{source=eval("("+TheTextBox.innerHTML+")")}catch(e){return erra(e)}if("[object Object]"!==Object.prototype.toString.call(source))return erra({message:'[Semantic]: The root has to be an Object: "{signal:[...]}"'});if(source.signal){if("[object Array]"!==Object.prototype.toString.call(source.signal))return erra({message:'[Semantic]: "signal" object has to be an Array "signal:[]"'})}else{if(!source.assign)return erra({message:'[Semantic]: "signal:[...]" or "assign:[...]" property is missing inside the root Object'});if("[object Array]"!==Object.prototype.toString.call(source.assign))return erra({message:'[Semantic]: "assign" object hasto be an Array "assign:[]"'})}return source}function renderWaveForm(a,b,c){var d,e,f,g,h,i,j,k,l,m=0;if(b.signal){insertSVGTemplate(a,document.getElementById(c+a),b),parseConfig(b),d=rec(b.signal,{x:0,y:0,xmax:0,width:[],lanes:[],groups:[]}),e=document.getElementById("lanes_"+a),f=document.getElementById("groups_"+a),h=parseWaveLanes(d.lanes,lane),k=renderWaveLane(e,h,a);for(l in k)m=Math.max(m,k[l]+d.width[l]);renderMarks(e,h,a),renderArcs(e,d.lanes,a,b),renderGaps(e,d.lanes,a),renderGroups(f,d.groups,a),lane.xg=Math.ceil((m-lane.tgo)/lane.xs)*lane.xs,i=lane.xg+lane.xs*(lane.xmax+1),j=h.length*lane.yo+lane.yh0+lane.yh1+lane.yf0+lane.yf1,g=document.getElementById("svgcontent_"+a),g.setAttribute("viewBox","0 0 "+i+" "+j),g.setAttribute("width",i),g.setAttribute("height",j),g.setAttribute("overflow","hidden"),e.setAttribute("transform","translate("+(lane.xg+.5)+", "+(lane.yh0+lane.yh1+.5)+")")}else b.assign&&(insertSVGTemplateAssign(a,document.getElementById(c+a),b),renderAssign(a,b))}function processAll(){var a,b,c,d;for(c=0,a=document.getElementsByTagName("SCRIPT"),b=0;b<a.length;b++)a.item(b).type&&"WaveDrom"===a.item(b).type&&(a.item(b).setAttribute("id","InputJSON_"+c),d=document.createElement("div"),d.id="WaveDrom_Display_"+c,a.item(b).parentNode.insertBefore(d,a.item(b)),c+=1);for(b=0;c>b;b+=1)renderWaveForm(b,eva("InputJSON_"+b),"WaveDrom_Display_"),WaveDrom.appendSaveAsDialog(b,"WaveDrom_Display_");document.head.innerHTML+='<style type="text/css">div.wavedromMenu{position:fixed;border:solid 1pt#CCCCCC;background-color:white;box-shadow:0px 10px 20px #808080;cursor:default;margin:0px;padding:0px;}div.wavedromMenu>ul{margin:0px;padding:0px;}div.wavedromMenu>ul>li{padding:2px 10px;list-style:none;}div.wavedromMenu>ul>li:hover{background-color:#b5d5ff;}</style>'}function editorRefresh(){renderWaveForm(0,eva("InputJSON_0"),"WaveDrom_Display_")}var lane,parse,waveSkin;parse=JsonML.parse,waveSkin=WaveSkin,lane={xs:20,ys:20,xg:120,yh0:0,yh1:0,yf0:0,yf1:0,y0:5,yo:30,tgo:-10,ym:15,xlabel:6,xmax:1,scale:1,head:{},foot:{}},WaveDrom.RenderWaveForm=renderWaveForm,WaveDrom.ProcessAll=processAll,WaveDrom.EditorRefresh=editorRefresh}(),WaveDrom.appendSaveAsDialog=function(a,b){"use strict";function c(a){var b=parseInt(e.style.left,10),d=parseInt(e.style.top,10);(a.x<b||a.x>b+e.offsetWidth||a.y<d||a.y>d+e.offsetHeight)&&(e.parentNode.removeChild(e),document.body.removeEventListener("mousedown",c,!1))}var d,e;d=document.getElementById(b+a),d.childNodes[0].addEventListener("contextmenu",function(f){var g,h,i;e=document.createElement("div"),e.className="wavedromMenu",e.style.top=f.y+"px",e.style.left=f.x+"px",g=document.createElement("ul"),h=document.createElement("li"),h.innerHTML="Save as PNG",g.appendChild(h),i=document.createElement("li"),i.innerHTML="Save as SVG",g.appendChild(i),e.appendChild(g),document.body.appendChild(e),h.addEventListener("click",function(){var f,g,h,i,j,k,l,m;f="",0!==a&&(g=document.getElementById(b+0),f+=g.innerHTML.substring(166,g.innerHTML.indexOf('<g id="waves_0">'))),f=[d.innerHTML.slice(0,166),f,d.innerHTML.slice(166)].join(""),h="data:image/svg+xml;base64,"+btoa(f),i=new Image,i.src=h,j=document.createElement("canvas"),j.width=i.width,j.height=i.height,k=j.getContext("2d"),k.drawImage(i,0,0),l=j.toDataURL("image/png"),m=document.createElement("a"),m.href=l,m.download="wavedrom.png",m.click(),e.parentNode.removeChild(e),document.body.removeEventListener("mousedown",c,!1)},!1),i.addEventListener("click",function(){var f,g,h,i;f="",0!==a&&(g=document.getElementById(b+0),f+=g.innerHTML.substring(166,g.innerHTML.indexOf('<g id="waves_0">'))),f=[d.innerHTML.slice(0,166),f,d.innerHTML.slice(166)].join(""),h="data:image/svg+xml;base64,"+btoa(f),i=document.createElement("a"),i.href=h,i.download="wavedrom.svg",i.click(),e.parentNode.removeChild(e),document.body.removeEventListener("mousedown",c,!1)},!1),e.addEventListener("contextmenu",function(a){a.preventDefault()},!1),document.body.addEventListener("mousedown",c,!1),f.preventDefault()},!1)};