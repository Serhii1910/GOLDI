{"version":3,"file":"editorController.js","sourceRoot":"","sources":["editorController.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Created by maximilian on 30.05.17.\n */\n\ninterface EditorWorkspaceControllerInterface\n{\n    closeEditor(editor : EditorController);\n    selectEditor(editor : EditorController);\n    \n    openComponent(component : GlobalComponentTypeID);\n    resolveComponentType(id : GlobalComponentTypeID) : Component\n    componentModified(component : CompoundComponent, id : GlobalComponentTypeID)\n    createComponent(component : CompoundComponent | string) : GlobalComponentTypeID;\n    createAndOpenComponent(component : CompoundComponent | string);\n}\n\n\nclass EditorController\n{\n    protected readonly SHORTCUTS            = {\n        delete : () => this.workspace.removeSelection()\n    };\n    protected readonly CTRL_SHORTCUTS       = {\n        arrowleft  : () => this.workspace.rotateSelection(-90),\n        arrowright : () => this.workspace.rotateSelection(90),\n        a: () => this.workspace.selectAll(),\n    };\n    protected readonly SHIFT_CTRL_SHORTCUTS = {\n        e : () => this.extractComponent()\n    };\n    \n    protected workspace : Workspace.Workspace;\n    protected toolbar : JQuery;\n    protected tabPane : JQuery;\n    protected tab : JQuery;\n    \n    protected componentName : string;\n    \n    constructor(protected controller : EditorWorkspaceControllerInterface, component : CompoundComponent, public originalComponentID : GlobalComponentTypeID, protected componentID : GlobalComponentTypeID, contentContainer : JQuery, tabContainer : JQuery, closeable : boolean)\n        {\n            this.tabPane = $('.tab-pane.template')\n                .clone()\n                .removeClass('template');\n            contentContainer.append(this.tabPane);\n            \n            const $ws = this.tabPane.find('.workspace');\n            \n            this.workspace = new Workspace.Workspace($ws.parent(), this, component);\n            $ws.remove();\n            const workspace = this.tabPane.find('svg');\n            workspace.addClass('workspace flex-grow-equal');\n            \n            //Bind Toolbar events\n            this.tabPane.find('.btn-delete')\n                .click(() => this.workspace.removeSelection());\n            this.tabPane.find('.btn-parameter')\n                .click(() => this.workspace.editSelectionParameters());\n            this.tabPane.find('.cb-connsim')\n                .change(() => this.workspace.setShowConnectorState((<HTMLInputElement>this.tabPane.find('.cb-connsim')[0]).checked));\n            this.tabPane.find('.cb-pan')\n                .change(() => this.workspace.setDragMode((<HTMLInputElement>this.tabPane.find('.cb-pan')[0]).checked ? 'pan' : 'select'));\n            this.tabPane.find('.cb-tooltip')\n                .change(() => this.workspace.setShowParameterTooltips((<HTMLInputElement>this.tabPane.find('.cb-tooltip')[0]).checked));\n            this.tabPane.find('.btn-zoomin')\n                .click(() => this.workspace.setRelativeZoom(1.5));\n            this.tabPane.find('.btn-zoomout')\n                .click(() => this.workspace.setRelativeZoom(1 / 1.5));\n            this.tabPane.find('.zoom-group > input')\n                .on({dblclick: () => {console.info(\"Zommreset\"); this.workspace.resetZoom()}}, \"input\");\n            this.tabPane.find('.btn-rotateleft')\n                .click(() => this.workspace.rotateSelection(-90));\n            this.tabPane.find('.btn-rotateright')\n                .click(() => this.workspace.rotateSelection(90));\n            this.tabPane.find('.btn-extract')\n                .click(() => this.extractComponent());\n            this.tabPane.find('input:checkbox')\n                .bootstrapToggle();\n\n            if (!(jQuery.contains(document.documentElement, workspace[0]))) {\n                console.error(\"Not visible!\")\n            }\n            \n            this.tabPane.attr('tabindex', '0');\n            this.tabPane.keyup(this.keyUpHandler);\n            $('body')\n                .bind('paste cut copy', this.clipboardAction);\n            \n            this.tab = $('.tabbarelement.template')\n                .clone()\n                .removeClass('template');\n            tabContainer.append(this.tab);\n            this.tab.find('.tabtitle')\n                .text(component.name);\n            this.componentName = component.name;\n            const closeLink    = this.tab.find('.closetab');\n            if (closeable)\n            {\n                closeLink.click((e) =>\n                                {\n                                    e.preventDefault();\n                                    e.stopPropagation();\n                                    this.controller.closeEditor(this);\n                                });\n            }\n            else\n            {\n                closeLink.remove();\n            }\n            this.tab.click(() => this.controller.selectEditor(this));\n            this.workspace.setShowConnectorState(true);\n        }\n    \n    clipboardAction = (event : JQueryEventObject) =>\n    {\n        /*TODO: Find better solution to only act when the workspace is selected\n         * This cannot be done by binding the event to the tabContainer only,\n         * because then the event does not fire in Chrome! */\n        if (!this.tabPane.is(':focus'))\n        {\n            return;\n        }\n        \n        const e = <ClipboardEvent>event.originalEvent;\n        if (e.type === 'paste')\n        {\n            this.workspace.pasteSubcircuit(JSON.parse(e.clipboardData.getData('text/json')));\n        }\n        if (e.type === 'cut' || e.type === 'copy')\n        {\n            e.clipboardData.setData('text/json', JSON.stringify(this.workspace.getSelectedSubcircuit()));\n        }\n        if (e.type === 'cut')\n        {\n            this.workspace.removeSelection();\n        }\n        e.preventDefault();\n        e.stopPropagation();\n    };\n    \n    keyUpHandler = (event) =>\n    {\n        const key   = event.key.toLowerCase();\n        let handler = this.SHORTCUTS[key];\n        if (event.ctrlKey)\n        {\n            handler = this.CTRL_SHORTCUTS[key] || handler;\n        }\n        if (event.ctrlKey && event.shiftKey)\n        {\n            handler = this.SHIFT_CTRL_SHORTCUTS[key] || handler;\n        }\n        if (handler !== undefined)\n        {\n            event.preventDefault();\n            event.stopPropagation();\n            handler();\n        }\n    };\n    \n    getLibraryComponent(identifier : GlobalComponentTypeID) : Workspace.Circuit\n        {\n            return this.controller.resolveComponentType(identifier);\n        };\n    \n    circuitModified(stateOnly : boolean)\n        {\n            if (this.componentID == null)\n            {\n                if (!stateOnly)\n                {\n                    new ComponentCreationDialog((name) =>\n                                                {\n                                                    const component          = <CompoundComponent>this.workspace.getCircuit();\n                                                    this.componentID         = this.controller.createComponent(new CompoundComponent(null, name, component.devices, component.connectors));\n                                                    this.originalComponentID = this.componentID;\n                                                    this.tab.find('.tabtitle')\n                                                        .text(name);\n                                                }, false).show();\n                }\n                \n            }\n            else\n            {\n                const circuit = this.workspace.getCircuit();\n                this.controller.componentModified(new CompoundComponent(this.componentID.componentID, this.componentName, circuit.devices, circuit.connectors), this.componentID);\n            }\n        };\n    \n    openCompoundComponent(component : GlobalComponentTypeID, workspace : Workspace.Workspace)\n        {\n            this.controller.openComponent(component);\n        };\n    \n    updateAbilities(abilities : Workspace.Abilities)\n        {\n            this.tabPane.find('.btn-delete')\n                .prop('disabled', !abilities.removeSelected);\n            this.tabPane.find('.btn-rotateleft')\n                .prop('disabled', !abilities.rotateSelection);\n            this.tabPane.find('.btn-rotateright')\n                .prop('disabled', !abilities.rotateSelection);\n            this.tabPane.find('.btn-parameter')\n                .prop('disabled', !abilities.editSelectionParameters);\n        }\n    \n    getSimulationInterface() : SimulationInterface\n        {\n            return this.workspace.getSimulationInterface();\n        }\n    \n    activateTab()\n        {\n            this.tabPane.attr('style', '');\n            this.tabPane.addClass('active');\n            this.tab.addClass('active');\n        }\n    \n    deactivateTab()\n        {\n            this.tabPane.attr('style', 'display: none !important');\n            this.tabPane.removeClass('active');\n            this.tab.removeClass('active');\n        }\n    \n    remove()\n        {\n            this.tab.remove();\n            this.tabPane.remove();\n        }\n    \n    extractComponent()\n        {\n            new ComponentCreationDialog((name) =>\n                                        {\n                                            const component = <CompoundComponent>this.workspace.getCircuit();\n                                            this.controller.createAndOpenComponent(new CompoundComponent(null, name, component.devices, component.connectors));\n                                        }, true).show();\n        }\n        \n    zoomChanged(zoomfactor: number) {\n        this.tabPane.find(\".zoom-group > input\").val(parseFloat((zoomfactor * 100).toPrecision(2)) + \" %\");\n    }\n\n    public reinitUI() {\n        this.tabPane.find('input:checkbox')\n            .bootstrapToggle(\"destroy\").bootstrapToggle();\n        this.workspace.updatePositions();\n    }\n}\n\nclass ComponentCreationDialog extends Dialog\n{\n    protected input : JQuery;\n    \n    constructor(protected callbackFunction : (name : string) => void, protected extracting : boolean)\n        {\n            super();\n        }\n    \n    protected getTitle() : string\n        {\n            return this.extracting ? 'Extract Component' : 'Save as new Component?';\n        }\n    \n    protected getContent() : JQuery\n        {\n            const text = this.extracting ? '<p><b>Please choose a name for the extracted component:</b></p>' :\n                         '<p>To save your modifications to this circuit,<br>it has to be saved as a new' +\n                         ' component!</p>' +\n                         '<p><b>Please choose a name:</b></p>';\n            \n            const content : JQuery = $('<div></div>')\n                .append(text);\n            this.input             = $('<input type=\"text\"/>');\n            this.input.val('New Component');\n            this.input.addClass('beast-horizontal-fill');\n            content.append(this.input);\n            \n            this.input.on('input', () =>\n            {\n                this.setButtonDisabled(this.extracting ? 'Extract' : 'Save', this.input.val().length == 0);\n            });\n            \n            this.addButton(this.extracting ? 'Extract' : 'Save', this.extracting ? 'glyphicon glyphicon-share' : 'glyphicon ' +\n                                                                                                                 'glyphicon-floppy-disk', this.confimedEvent);\n            this.addButton('Cancel', 'glyphicon glyphicon-remove', () => this.close());\n            \n            this.registerKeyListener((key : number) =>\n                                     {\n                                         //enter\n                                         if (key == 13)\n                                         {\n                                             this.confimedEvent();\n                                         }\n                                     });\n            \n            return content;\n        }\n    \n    confimedEvent = () =>\n        {\n            const val : string = this.input.val();\n            if (val.length != 0)\n            {\n                this.callbackFunction(this.input.val());\n                this.close();\n            }\n        };\n}"]}